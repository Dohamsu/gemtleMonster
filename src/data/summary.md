# 도트 방치형 웹게임 기획 문서

## 0. 프로젝트 개요

- **프로젝트 타입**: 도트 그래픽 기반 웹 게임  
- **장르**: 방치형 + 던전 전투 + 연금술(몬스터 제작/강화)  
- **플랫폼**: 웹 브라우저(PC/모바일 대응)  
- **세계관/컨셉**:
  - 판타지 중세 배경
  - 플레이어는 연금술사 겸 용병단/몬스터 주인
  - 농장·광산·숲 등에서 재료를 방치 채집하고, 그 재료로 몬스터/용병을 만들어 던전에 보냄

---

## 1. 코어 게임 루프

1. **방치 채집**
   - 농장/광산/약초밭 등에서 시간이 지날수록 재료 자동 생산
   - 일정 확률로 **특수 재료** 또는 **퀘스트 아이템** 드랍

2. **연금술 & 몬스터 제작**
   - 채집 재료 + 던전 드랍 재료를 조합해서 몬스터/용병 제작
   - 조합식에 따라 스탯/속성/스킬이 달라짐

3. **던전 전투**
   - 스테이지형 던전 구조
   - 각 스테이지는 **클리어 후 쿨타임**이 존재 → 시간이 지나야 다시 입장 가능 (방치 요소)
   - 던전 클리어 시 일반 재료 + 유니크 재료 + 퀘스트 아이템 획득

4. **성장 및 메타 프로그레션**
   - 채집 장소 레벨업
   - 연금술 레벨/연구 레벨 업
   - 몬스터/용병 강화(레벨, 장비, 특성)
   - 던전 해금(상위 난이도, 이벤트 던전 등)

---

## 2. 시스템 설계

### 2.1 방치형 채집 시스템

#### 2.1.1 채집 장소 리스트(예시)

| ID  | 이름      | 설명                                   | 기본 산출물     | 특수/랜덤 요소 예시                              |
|-----|-----------|----------------------------------------|-----------------|--------------------------------------------------|
| F1  | 농장      | 곡물/야채를 재배하는 밭               | 곡물, 허브 조각 | 일정 확률로 희귀 허브, 퀘스트용 씨앗 드랍       |
| F2  | 광산      | 철, 구리 등 광물을 캐는 광산          | 철광석, 구리광석| 일정 확률로 희귀 광석, 던전 키 파편 드랍        |
| F3  | 약초밭    | 연금술에 쓰이는 약초를 채집           | 일반 약초       | 일정 확률로 상급 약초, 독성 약초(특수 레시피)   |
| F4  | 수정 동굴 | 마력의 근원이 되는 수정 채집          | 마력 수정 파편  | 일정 확률로 고급 수정, 보스 소환 재료           |
| F5  | 사냥터    | 야생 몬스터를 사냥해 재료 수급        | 가죽, 뿔, 이빨  | 일정 확률로 소환수 알, 희귀 부위 드랍           |

#### 2.1.2 채집 속도 & 레벨 시스템(공통 규칙 예시)

- **기본 규칙(각 장소 공통 베이스 예시)**  
  - Lv1: 10초마다 기본 재료 1개  
  - Lv2: 8초마다 기본 재료 1개 (+ 랜덤 특수 재료 확률 소폭 증가)  
  - Lv3: 6초마다 기본 재료 1개  
  - Lv4: 5초마다 기본 재료 1개, 특수 재료 드랍률 추가 상승  
  - Lv5: 4초마다 기본 재료 1개, 퀘스트 아이템 드랍 테이블 추가  

- **특수 드랍 확률(예시 값)**  
  - 기본: 2% 확률로 특수 재료  
  - 장소 Lv가 1 증가할 때마다 +0.5%p  
  - 특정 업그레이드(예: `희귀 채집 기술 연구`) 시 추가 +X%p  

#### 2.1.3 초기 해금 조건 & 업그레이드 비용(예시)

- **농장(F1)**
  - 초기 해금: 튜토리얼 완료 시 자동 해금
  - Lv업 비용:
    - Lv1 → Lv2: 골드 100
    - Lv2 → Lv3: 골드 300 + 목재 10
    - Lv3 → Lv4: 골드 800 + 목재 30
    - Lv4 → Lv5: 골드 1500 + 특수 씨앗 1

- **광산(F2)**
  - 초기 해금: 플레이어 계정 레벨 3 이상
  - Lv업 비용:
    - 농장보다 약간 비싼 구조(철/석재 등 추가 요구)

- **약초밭(F3), 수정 동굴(F4), 사냥터(F5)**
  - 초기 해금:
    - 특정 던전 스테이지 클리어 또는 메인 퀘스트 진행도 기준
  - Lv업 비용:
    - 각 장소 테마 재료(약초, 수정, 몬스터 파편 등)를 요구

> 실제 밸런싱 단계에서 위 수치는 조정 예정. 현재는 “구조 설계용 임시 값”.

---

### 2.2 던전 전투 시스템

#### 2.2.1 스테이지 구조

- 던전은 여러 **스테이지**로 구성
  - 예: `1-1`, `1-2`, `1-3` → 보스 → 다음 챕터 해금
- 각 스테이지:
  - 입장 시 소모 자원: `스태미나` 또는 `특정 키 아이템`
  - 출전 몬스터/용병 편성: N마리(슬롯 기반)
  - 전투는 **자동 진행(오토 배틀)** 중심  
    - 스킬/버스트만 유저 개입 가능하게 할지 여부는 추후 결정

#### 2.2.2 쿨타임 구조(방치 요소)

- 스테이지 클리어 후:
  - 해당 스테이지 또는 해당 던전에 **쿨타임** 부여
  - 예: 5분 / 10분 / 30분 등
- 쿨타임 동안:
  - 다른 던전 이용 또는 방치 채집/연금술 진행
  - 쿨타임 감소/초기화 아이템 또는 연구로 조정 가능

#### 2.2.3 보상 구조

- **공통 보상**
  - 기본 재화(골드)
  - 경험치(플레이어 또는 몬스터)

- **유니크/특수 보상**
  - 던전 테마에 맞는 유니크 재료
  - 상위 연금술 레시피에 필요한 핵심 재료
  - 이벤트 트리거용 아이템(이벤트 던전 해금, 월드 이벤트 등)

- **퀘스트 아이템**
  - 메인/사이드 퀘스트 진행에 필요한 재료 또는 증표

---

### 2.3 연금술 & 몬스터 제작 시스템

#### 2.3.1 재료 타입

- **기본 재료**: 농장/광산/약초밭 등에서 방치 채집
- **유니크 재료**: 던전 전용 드랍
- **촉매/특수 재료**: 드랍률이 낮은 고급 재료, 레시피 옵션 역할
- **퀘스트용 재료**: 제작보다는 컨텐츠 해금·이벤트에 사용

#### 2.3.2 레시피 구조(개념)

- 레시피 기본 구조:
  - **기본 재료 슬롯**: 필수 (예: 곡물 + 가죽 + 철)
  - **속성 결정 슬롯**: 속성 결정 (불/물/바람/땅/어둠/빛 등)
  - **옵션 슬롯**: 스탯 보정 또는 특수 능력 부여  
    (예: 치명타, 방어 관통, 도트 데미지 등)

- 예시 레시피:
  - `가죽 10 + 뿔 3 + 불 속성 결정 1` → **불 속성 돌진형 몬스터**
  - `철광석 15 + 수정 5 + 빛 속성 결정 1` → **탱커형 골렘**

#### 2.3.3 몬스터/용병 성장

- **레벨 업**
  - 전투 경험치 또는 재료 소모를 통해 레벨 상승

- **강화**
  - 동일 개체/동일 종 합성
  - 전용 강화 재료 사용

- **특성 해금**
  - 특정 레벨 달성 또는 연구 진행도에 따라  
    패시브/액티브 스킬 해금

---

## 3. 기술 스택 및 아키텍처

### 3.1 프론트엔드 스택

- **번들러/빌드**: Vite  
- **프레임워크**: React  
- **언어**: TypeScript  
- **상태 관리**: Zustand  

- **렌더링 구조**
  - **Canvas (순수 TS)**
    - 전투 화면, 애니메이션, 맵/캐릭터 렌더링 등 실시간 표현
  - **React DOM UI**
    - 인벤토리, 메뉴, 업그레이드, 연금술 UI, 상점, 설정 등

---

### 3.2 백엔드 / 서버리스 구조

- **기본 백엔드 플랫폼**: Supabase
  - Auth(회원 가입/로그인)
  - Database(PostgreSQL)
  - Storage(이미지/데이터 필요 시)

- **서버리스 함수**
  - Supabase Edge Functions 또는 Vercel Serverless Functions 활용
  - 주요 역할:
    - 게임 핵심 데이터(자원, 재료, 몬스터, 클리어 기록) 서버 검증 및 저장
    - 클라이언트에서 조작하기 어려운 로직(보상 계산, 치트 방지)
    - 리더보드/랭킹, 일일 보상 등 시간 의존 로직 처리

- **예상 API 예시**

  - `POST /api/run-dungeon`  
    - **입력**: 파티 구성, 타겟 던전 ID  
    - **동작**: 서버에서 전투 계산 → 결과/보상 반환 후 DB 저장  

  - `POST /api/claim-idle-reward`  
    - **입력**: 채집 장소 ID  
    - **동작**: 서버에서 마지막 수령 시간 기준 정산 후 보상 지급  

  - `GET /api/profile`  
    - **동작**: 플레이어 기본 정보/자원/해금 상태 조회  

---

### 3.3 배포 및 운영

- **배포 플랫폼**: Vercel
  - React + Vite 빌드 결과 배포
  - 필요한 경우 Vercel Functions 사용

- **DB/인증/스토리지**: Supabase 무료 플랜 기준으로 시작

- **환경 변수 관리**
  - Supabase URL/KEY
  - (선택) Analytics/로그 관련 키

- **운영 목표**
  - 초반: 무료/저비용 플랜으로 운영
  - 유저 수 증가 시:
    - Supabase 플랜 업그레이드 또는 별도 백엔드로 이전 고려

---

## 4. 앞으로 확장 가능 영역(메모)

- PvP 또는 비동기 경쟁 요소(랭킹, 고득점 던전)
- 이벤트 던전 / 한정 레시피
- 자동 편성 / AI 추천 파티
- 모바일 특화 UX
  - 세로 화면 전투
  - 한 손 조작 최적화

---
