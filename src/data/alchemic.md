# 연금술 시스템 컨셉 문서

## 1. 시스템 개요

- 플레이어는 다양한 재료를 조합해 몬스터를 생성하는 **연금술 시스템**을 사용한다.
- 연금술 결과물은 주로 **몬스터(소환수, 용병)**이며, 던전 전투에 사용된다.
- 연금술은 크게 두 가지 축으로 구성된다.
  - 항상 이용 가능한 **기본 레시피**
  - 특정 조건(추가 재료, 시간대, 접속 언어 등)을 만족해야 발동되는 **특수 레시피**
- 모든 레시피는 이후 별도 JSON/DB 구조에서 관리하며, 이 문서는 컨셉 및 규칙만 정의한다.
- 별도의 **공장/시설 배치 시스템(방치형 생산 시설)**과 연계되어, 재료 수급과 특수 레시피 트리거에 영향을 받는다.

---

## 2. 재료 구조

### 2.1. 재료 계열

재료는 성격에 따라 다음과 같은 계열로 분류한다.

- **PLANT 계열**  
  - 예: 약초, 버섯, 꽃, 씨앗 등  
  - 용도: 기초 회복, 보조, 버프용 몬스터 제작에 자주 사용

- **MINERAL 계열**  
  - 예: 광석, 결정, 금속 조각 등  
  - 용도: 골렘, 방어형 몬스터 제작의 핵심 재료

- **BEAST 계열**  
  - 예: 짐승 뼈, 송곳니, 발톱, 가죽 등  
  - 용도: 물리 공격형, 민첩형 몬스터 제작에 사용

- **SLIME 계열**  
  - 예: 슬라임 점액, 슬라임 코어 등  
  - 용도: 입문용 몬스터, 탱커 및 변이형 슬라임 제작

- **SPIRIT 계열**  
  - 예: 정령 가루, 영혼 파편 등  
  - 용도: 서포트형, 정령/수호령 계열 몬스터 제작

### 2.2. 특수 재료

일반적으로 얻기 어려운 재료로, 특수 레시피의 트리거 역할을 한다.

- **던전 유니크 재료**  
  - 특정 스테이지/보스에서만 드랍  
  - 예: 불 던전 코어, 왕관 파편 등

- **이벤트 재료**  
  - 기간 한정 이벤트, 시즌 컨텐츠에서만 획득  

- **촉매 재료**  
  - 단독으로는 의미가 약하지만, 특정 레시피와 결합 시 특수 몬스터를 생성  
  - 예: 시간/언어 조건까지 함께 만족해야 진짜 효과가 발동되는 룬류 재료

---

## 3. 몬스터 구조

### 3.1. 역할(Role)

각 몬스터는 전투에서의 역할을 가진다.

- **TANK**: 높은 체력/방어, 도발/피해 분산 역할
- **DPS**: 높은 공격력, 짧은 쿨타임 스킬
- **SUPPORT**: 힐/버프/디버프 중심
- **HYBRID**: 두 역할의 중간 성격을 가진 하이브리드형

### 3.2. 속성(Attribute)

속성은 상성 시스템이나 스킬 효과에 사용된다.

- **FIRE, WATER, EARTH, WIND, LIGHT, DARK, CHAOS** 등

### 3.3. 등급(Rarity)

- **N (노멀)**: 기본 레시피로 쉽게 만드는 몬스터  
- **R (레어)**: 약간의 조건/레벨이 필요한 몬스터  
- **SR (슈퍼 레어)**: 특수 조건, 희귀 재료를 요구하는 몬스터  
- **SSR (초 레어)**: 매우 낮은 확률, 복합 조건이 필요한 최상급 몬스터  

---

## 4. 레시피 구조 개념

### 4.1. 레시피 공통 요소

모든 연금술 레시피는 다음과 같은 공통 요소를 가진다.

- 레시피 ID
- 레시피 이름
- 레시피 설명
- 기본 재료 목록 (재료 ID + 수량)
- 결과 몬스터 ID
- 결과 몬스터 등급/속성/역할(메타정보)
- 제작 시간 (초 단위)
- 성공 확률 (0~100%)
- 요구 연금술 레벨
- 숨김 여부  
  - 숨김 레시피는 처음 성공하기 전까지 UI에 노출되지 않음
- 선택적 조건 목록  
  - 추가 재료, 시간대, 접속 언어 등

---

## 5. 기본 레시피 컨셉

“항상 공개된 상태로 플레이 진행에 필요한 몬스터를 안정적으로 공급해 주는 레시피”를 의미한다.

### 5.1. 예시 컨셉

1. **기본 슬라임**  
   - 재료: 슬라임 코어 + 약초  
   - 결과: 초반 탱커형 N 등급 몬스터  
   - 특징: 입문용, 성공률 100%, 제작 시간 짧음  

2. **송곳니 하운드**  
   - 재료: 짐승 송곳니 + 약초  
   - 결과: 민첩한 DPS형 N 등급 몬스터  
   - 특징: 공격형 파티 구성의 기본  

3. **돌 골렘**  
   - 재료: 마력 광석 + 슬라임 코어  
   - 결과: R 등급 탱커형 골렘  
   - 특징: 제작 시간 길고 성공률이 다소 낮음  

4. **정령 요정**  
   - 재료: 정령 가루 + 약초  
   - 결과: R 등급 서포트형 몬스터  
   - 특징: 힐/버프 능력을 제공, 파티 안정성 확보  

5. **어둠 늑대**  
   - 재료: 짐승 송곳니 + 어둠의 결정  
   - 결과: R 등급 어둠 DPS 몬스터  
   - 특징: 야간/암흑 관련 던전에 특화된 딜러  

---

## 6. 특수 레시피 컨셉

특수 레시피는 **조건을 만족했을 때만** 발동되며, 주로 R~SSR 등급 몬스터를 생산한다.  
조건은 여러 종류가 있으며, 복합적으로도 사용 가능하다.

### 6.1. 조건 타입

- **추가 재료 조건**
  - 특정 희귀 재료를 함께 넣어야 발동

- **시간대 조건**
  - 특정 시간 범위 내(예: 00:00~03:00)에만 유효

- **접속 언어 조건**
  - 클라이언트 언어(ko, en, ja 등)에 따라 결과가 달라짐

- **그 외 확장 가능 요소**
  - 연금술 연구소 레벨
  - 이벤트 플래그
  - 최초 발견 제한 등

> 기본 규칙: 모든 조건은 **AND 조건**으로 동작하는 것을 기본으로 한다.  
> (추후 필요 시 OR/우선순위 규칙을 추가로 정의 가능)

---

## 7. 특수 레시피 유형별 예시 컨셉

### 7.1. 추가 재료 기반 특수 레시피

1. **왕슬라임**  
   - 기본 레시피: 상급 슬라임 조합(슬라임 코어 + 약초 다량)  
   - 추가 재료: 왕관 파편 (보스 던전 드랍)  
   - 결과: SR 등급 탱커 몬스터  
   - 특징: 일반 슬라임보다 체력, 방어, 도발 능력이 크게 향상  

2. **마그마 골렘**  
   - 기본 레시피: 골렘 조합(마력 광석 + 슬라임 코어)  
   - 추가 재료: 불 던전 코어 (불 속성 던전 보스 전용 드랍)  
   - 결과: SR 등급 FIRE/탱딜 하이브리드 골렘  
   - 특징: 방어형이면서 반사/화상 피해를 주는 공격 능력 보유  

### 7.2. 시간대 기반 특수 레시피

1. **악몽 슬라임 (심야 전용)**  
   - 재료: 슬라임 코어 + 어둠의 결정  
   - 조건: 서버 시간 기준 00:00~03:00 사이  
   - 결과: SR 등급 DARK/디버퍼 몬스터  
   - 특징: 수면/공포/약화 디버프 스킬 보유  

2. **새벽 정령**  
   - 재료: 정령 가루 + 약초  
   - 조건: 04:00~06:00 사이  
   - 결과: R~SR 등급 LIGHT/서포트 몬스터  
   - 특징: 새벽 버프, 경험치 증가 또는 골드 보너스 버프 제공  

### 7.3. 접속 언어 기반 특수 레시피

하나의 “세계 수호자” 레시피를 클라이언트 언어에 따라 다르게 분기한다.

**공통 재료 예시:**

- 정령 가루 + 마력 광석 + 세계의 룬

**언어별 결과 컨셉:**

- **한국어(`ko`)**  
  - 결과: 호랑이 수호령 (SR)  
  - 특징: 치명타/분노 계열 패시브, 근접 전투에 강함  

- **영어(`en`)**  
  - 결과: 기사 골렘 (SR)  
  - 특징: 방패/도발 중심의 방어형, 파티 보호 특화  

- **일본어(`ja`)**  
  - 결과: 여우 정령 (SR)  
  - 특징: 회피/속도/디버프에 특화된 요괴형 몬스터  

- **기타 언어**  
  - 결과: 세계 수호령 (R)  
  - 특징: 속성/역할이 무난한 범용형 몬스터  

---

## 8. 레시피 발견 및 해금 구조

### 8.1. 기본 레시피

- 초반 튜토리얼과 함께 자동으로 해금  
- 연금술 레벨 상승에 따라 단계적으로 추가 공개  
- 플레이어는 항상 레시피 목록을 보고 재료를 준비할 수 있다.

### 8.2. 숨겨진 레시피(특수)

- UI 상에 레시피가 표시되지 않으며, 플레이어가 **조건을 우연히 만족**했을 때 처음으로 발견된다.
- 첫 성공 시:
  - “새 조합법 발견!” 연출
  - 연금술 도감/레시피 목록에 해당 레시피가 등록
- 이후에는 조건을 알고 다시 노릴 수 있게 된다.

---

## 9. 연금술 진행 플로우

1. 플레이어가 연금술 UI에서 재료를 선택하고 조합을 시작한다.
2. 게임 로직이 다음 정보를 기반으로 가능한 레시피를 탐색한다.
   - 투입된 재료 목록
   - 플레이어 연금술 레벨
   - 현재 서버 시간
   - 클라이언트 언어/로케일
3. 조건을 모두 만족하는 레시피들 중 **우선순위가 가장 높은 레시피**를 선택한다.
   - 예: 특수 레시피 > 기본 레시피
4. 성공 확률에 따라 성공/실패 판정을 내린다.
   - 성공: 해당 몬스터를 생성하고 인벤토리에 지급  
   - 실패: 일부 재료 소모 후 실패 연출 (또는 실패 전용 산출물 생성)
5. 숨김 레시피였을 경우:
   - 레시피 도감에 신규 레시피 추가
   - 최초 발견 보상(연금술 경험치, 재화 등) 지급 가능

---

## 10. 확장 아이디어

- **연금술 연구소 업그레이드**  
  - 제작 시간 감소, 성공 확률 증가, 새로운 레시피 해금 등

- **연금술 랭크 시스템**  
  - 특정 랭크 달성 시 상위 등급 레시피 등장

- **계절/이벤트 연금술**  
  - 시즌 한정 재료 + 기간 한정 레시피로 한정 몬스터 생산

- **발견 로그/도감 시스템**  
  - 플레이어가 어떤 조건으로 어떤 몬스터를 처음 만들었는지 기록  
  - 다른 유저와 레시피 공유/힌트 시스템으로 소셜 요소 추가 가능

---

## 11. 공장 및 시설 배치 특성 (방치형 생산 시스템 연계)

### 11.1. 개요

- 별도의 **공장/시설 배치 시스템**에서 재료를 자동 생산/가공한다.
- 맵은 격자(Grid) 기반이며, 각 타일에 1개의 시설만 배치 가능하다.
- **시설의 종류, 지형, 인접 배치**에 따라:
  - 재료 생산량
  - 특수 재료 등장 확률
  - 연금술 관련 보정(제작 시간, 성공률, 희귀 레시피 발견률)
  가 달라진다.

### 11.2. 시설 타입

1. **채집 시설(원재료 생산)**  
   - 허브 농장(PLANT)  
   - 버섯 농장(PLANT)  
   - 광산(MINERAL)  
   - 채석장(MINERAL)  
   - 수렵 캠프(BEAST)  
   - 슬라임 양식장(SLIME)  
   - 정령 숲(SPIRIT)

2. **가공 시설(중간/고급 재료 생산)**  
   - 허브 건조 공장 (약초 → 고급 약재)  
   - 광석 정제 공장 (광석 → 정제 금속/마력 광석)  
   - 몬스터 재료 가공소 (뼈/송곳니 → 가공 부품)  
   - 촉매 제작소 (기본 재료 → 촉매/룬)  

3. **지원 시설(버프/효율 보정)**  
   - 창고: 보관량 증가, 생산품 자동 정리  
   - 마력 탑: 주변 시설의 마력 관련 생산/드랍률 증가  
   - 시간 왜곡 장치: 인접 연금 공방/공장의 제작 시간 감소  
   - 관측 탑: 특수 재료 등장 확률, 숨김 레시피 발견률 증가  

### 11.3. 지형 보너스

각 타일은 지형 타입을 가진다.

- **평야**: 농장 계열 생산량 +%  
- **숲**: 버섯 농장, 정령 숲 효율 증가, SPIRIT/PLANT 드랍률 증가  
- **산지**: 광산/채석장 생산량 +%, 희귀 광석 등장 확률 증가  
- **하천/호수 인접**: 슬라임 양식장, 허브 농장 성장 속도 증가  
- **마력 지대**: 마력 탑, 촉매 제작소, 연금 공방 계열 보너스 크게 증가  

지형 보너스는 **기본 생산량 × (1 + 지형 보너스%)** 형태로 계산한다.

### 11.4. 인접/클러스터 배치 보너스

시설 배치를 퍼즐처럼 구성할 수 있도록 **인접/라인/클러스터 보너스**를 둔다.

- **동일 계열 연속 배치(라인 보너스)**  
  - 예: 허브 농장 3개를 일렬로 배치  
  - 효과: 해당 라인 전체 PLANT 생산량 +10%  

- **생산 → 가공 → 연금의 체인 배치**  
  - 예: 허브 농장 → 허브 건조 공장 → 연금 공방을 일직선 혹은 인접 배치  
  - 효과:  
    - 해당 체인에서 생산된 PLANT 재료로 만드는 연금술의 제작 시간 -X%  
    - PLANT 계열 레시피의 희귀 몬스터 등장 확률 +Y%  

- **지원 시설 인접 보너스**  
  - 창고: 인접 4칸의 시설 생산량 +5%, 재료 낭비(오버플로) 방지  
  - 마력 탑: 주변 2칸 이내 연금 공방/촉매 제작소의 특수 레시피 발동률 +Z%  
  - 시간 왜곡 장치: 인접 연금 공방의 제작 시간 -15%  

### 11.5. 연금술과의 직접 연계 규칙

1. **재료 수급량 → 연금술 시도 횟수 증가**  
   - 공장/시설에서 자동으로 들어오는 재료가 많을수록  
     - 유저가 더 자주 연금술을 시도할 수 있음  
     - 그만큼 숨김 레시피를 찾을 확률도 증가

2. **특수 재료 소스 정의**  
   - 일부 특수 재료는 던전뿐 아니라 “시설 조건”으로도 얻을 수 있다.  
   - 예:  
     - 산지 광산 2개 + 정제 공장 1개 + 마력 탑 인접 → 낮은 확률로 `마력 결정` 생성  
     - 숲 지형 정령 숲 + 관측 탑 인접 → 일정 확률로 `세계의 룬 파편` 생성  

3. **시설 레벨과 연금술 보정**  
   - 시설에도 레벨이 있으며, 레벨이 올라갈수록:  
     - 재료 생산량/품질 상승  
     - 연금술 성공률, 특수 레시피 발동률에 소폭의 글로벌 보정 적용  

4. **특정 배치 패턴 → 전용 레시피 해금**  
   - 맵 배치를 특정 패턴으로 구성했을 때만 열리는 레시피를 둘 수 있다.  
   - 예:  
     - `정령 숲(숲 지형)` + `마력 탑` + `연금 공방`을 삼각형 배치  
       → “세계 수호자” 계열 레시피 최초 해금 플래그 활성화  

### 11.6. 예시 배치 패턴 컨셉

1. **허브 연금 라인**  
   - 구성: 평야 타일에 허브 농장 2개 → 허브 건조 공장 1개 → 연금 공방 1개  
   - 효과:  
     - PLANT 계열 재료 생산량 +20%  
     - PLANT 재료를 사용하는 연금 레시피 제작 시간 -10%

2. **슬라임 연구 지구**  
   - 구성: 하천 인접 슬라임 양식장 2개 + 슬라임 연구소 1개 + 창고 1개  
   - 효과:  
     - SLIME 계열 재료 생산량 +15%  
     - 슬라임 계열 몬스터 레시피 성공률 +5%  
     - 드물게 특수 재료 `변이 점액` 발생 → 변이 슬라임 레시피 조건 재료  

3. **마력 공업 단지**  
   - 구성: 산지 광산 2개 + 광석 정제 공장 1개 + 촉매 제작소 1개 + 마력 탑 1개  
   - 효과:  
     - MINERAL 재료 고급화 비율 증가  
     - 촉매 제작 성공률 +10%  
     - 일정 확률로 특수 촉매 `마력 촉매` 생성 → 상급 골렘/수호자 레시피 조건 재료  

---

이 문서는 연금술 시스템과 공장/시설 배치 기반 방치형 생산 시스템을 하나의 규칙 세트로 정리한 설계 문서이며,  
실제 구현 시에는 이 구조를 기준으로 레시피/재료/몬스터/시설 정보를 JSON 및 DB 스키마로 분리해 관리한다.
